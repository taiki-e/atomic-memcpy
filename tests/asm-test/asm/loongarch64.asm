asm_test::atomic_memcpy_load_align1::read_volatile_acquire_fence:
        addi.d            $sp, $sp, -400
        st.d              $ra, $sp, 392
        st.d              $fp, $sp, 384
        st.d              $s0, $sp, 376
        st.d              $s1, $sp, 368
        st.d              $s2, $sp, 360
        st.d              $s3, $sp, 352
        st.d              $s4, $sp, 344
        st.d              $s5, $sp, 336
        st.d              $s6, $sp, 328
        st.d              $s7, $sp, 320
        st.d              $s8, $sp, 312
        ld.b              $a2, $a1, 63
        st.d              $a2, $sp, 304
        ld.b              $a2, $a1, 62
        st.d              $a2, $sp, 296
        ld.b              $a2, $a1, 61
        st.d              $a2, $sp, 288
        ld.b              $a2, $a1, 60
        st.d              $a2, $sp, 280
        ld.b              $a2, $a1, 59
        st.d              $a2, $sp, 272
        ld.b              $a2, $a1, 58
        st.d              $a2, $sp, 264
        ld.b              $a2, $a1, 57
        st.d              $a2, $sp, 256
        ld.b              $a2, $a1, 56
        st.d              $a2, $sp, 248
        ld.b              $a2, $a1, 55
        st.d              $a2, $sp, 240
        ld.b              $a2, $a1, 54
        st.d              $a2, $sp, 232
        ld.b              $a2, $a1, 53
        st.d              $a2, $sp, 224
        ld.b              $a2, $a1, 52
        st.d              $a2, $sp, 216
        ld.b              $a2, $a1, 51
        st.d              $a2, $sp, 208
        ld.b              $a2, $a1, 50
        st.d              $a2, $sp, 200
        ld.b              $a2, $a1, 49
        st.d              $a2, $sp, 192
        ld.b              $a2, $a1, 48
        st.d              $a2, $sp, 184
        ld.b              $a2, $a1, 47
        st.d              $a2, $sp, 176
        ld.b              $a2, $a1, 46
        st.d              $a2, $sp, 168
        ld.b              $a2, $a1, 45
        st.d              $a2, $sp, 160
        ld.b              $a2, $a1, 44
        st.d              $a2, $sp, 152
        ld.b              $a2, $a1, 43
        st.d              $a2, $sp, 144
        ld.b              $a2, $a1, 42
        st.d              $a2, $sp, 136
        ld.b              $a2, $a1, 41
        st.d              $a2, $sp, 128
        ld.b              $a2, $a1, 40
        st.d              $a2, $sp, 120
        ld.b              $a2, $a1, 39
        st.d              $a2, $sp, 112
        ld.b              $a2, $a1, 38
        st.d              $a2, $sp, 104
        ld.b              $a2, $a1, 37
        st.d              $a2, $sp, 96
        ld.b              $a2, $a1, 36
        st.d              $a2, $sp, 88
        ld.b              $a2, $a1, 35
        st.d              $a2, $sp, 80
        ld.b              $a2, $a1, 34
        st.d              $a2, $sp, 72
        ld.b              $a2, $a1, 33
        st.d              $a2, $sp, 64
        ld.b              $a2, $a1, 32
        st.d              $a2, $sp, 56
        ld.b              $a2, $a1, 31
        st.d              $a2, $sp, 48
        ld.b              $a2, $a1, 30
        st.d              $a2, $sp, 40
        ld.b              $a2, $a1, 29
        st.d              $a2, $sp, 32
        ld.b              $a2, $a1, 28
        st.d              $a2, $sp, 24
        ld.b              $a2, $a1, 27
        st.d              $a2, $sp, 16
        ld.b              $ra, $a1, 26
        ld.b              $s8, $a1, 25
        ld.b              $s7, $a1, 24
        ld.b              $s6, $a1, 23
        ld.b              $s5, $a1, 22
        ld.b              $s4, $a1, 21
        ld.b              $s3, $a1, 20
        ld.b              $s2, $a1, 19
        ld.b              $s1, $a1, 18
        ld.b              $s0, $a1, 17
        ld.b              $fp, $a1, 16
        ld.b              $t8, $a1, 15
        ld.b              $t7, $a1, 14
        ld.b              $t6, $a1, 13
        ld.b              $t5, $a1, 12
        ld.b              $t4, $a1, 11
        ld.b              $t3, $a1, 10
        ld.b              $t2, $a1, 9
        ld.b              $t1, $a1, 8
        ld.b              $t0, $a1, 7
        ld.b              $a7, $a1, 6
        ld.b              $a6, $a1, 5
        ld.b              $a5, $a1, 4
        ld.b              $a4, $a1, 3
        ld.b              $a3, $a1, 2
        ld.b              $a2, $a1, 1
        ld.b              $a1, $a1, 0
        st.b              $a1, $a0, 0
        st.b              $a2, $a0, 1
        st.b              $a3, $a0, 2
        st.b              $a4, $a0, 3
        st.b              $a5, $a0, 4
        st.b              $a6, $a0, 5
        st.b              $a7, $a0, 6
        st.b              $t0, $a0, 7
        st.b              $t1, $a0, 8
        st.b              $t2, $a0, 9
        st.b              $t3, $a0, 10
        st.b              $t4, $a0, 11
        st.b              $t5, $a0, 12
        st.b              $t6, $a0, 13
        st.b              $t7, $a0, 14
        st.b              $t8, $a0, 15
        st.b              $fp, $a0, 16
        st.b              $s0, $a0, 17
        st.b              $s1, $a0, 18
        st.b              $s2, $a0, 19
        st.b              $s3, $a0, 20
        st.b              $s4, $a0, 21
        st.b              $s5, $a0, 22
        st.b              $s6, $a0, 23
        st.b              $s7, $a0, 24
        st.b              $s8, $a0, 25
        st.b              $ra, $a0, 26
        ld.d              $a1, $sp, 16
        st.b              $a1, $a0, 27
        ld.d              $a1, $sp, 24
        st.b              $a1, $a0, 28
        ld.d              $a1, $sp, 32
        st.b              $a1, $a0, 29
        ld.d              $a1, $sp, 40
        st.b              $a1, $a0, 30
        ld.d              $a1, $sp, 48
        st.b              $a1, $a0, 31
        ld.d              $a1, $sp, 56
        st.b              $a1, $a0, 32
        ld.d              $a1, $sp, 64
        st.b              $a1, $a0, 33
        ld.d              $a1, $sp, 72
        st.b              $a1, $a0, 34
        ld.d              $a1, $sp, 80
        st.b              $a1, $a0, 35
        ld.d              $a1, $sp, 88
        st.b              $a1, $a0, 36
        ld.d              $a1, $sp, 96
        st.b              $a1, $a0, 37
        ld.d              $a1, $sp, 104
        st.b              $a1, $a0, 38
        ld.d              $a1, $sp, 112
        st.b              $a1, $a0, 39
        ld.d              $a1, $sp, 120
        st.b              $a1, $a0, 40
        ld.d              $a1, $sp, 128
        st.b              $a1, $a0, 41
        ld.d              $a1, $sp, 136
        st.b              $a1, $a0, 42
        ld.d              $a1, $sp, 144
        st.b              $a1, $a0, 43
        ld.d              $a1, $sp, 152
        st.b              $a1, $a0, 44
        ld.d              $a1, $sp, 160
        st.b              $a1, $a0, 45
        ld.d              $a1, $sp, 168
        st.b              $a1, $a0, 46
        ld.d              $a1, $sp, 176
        st.b              $a1, $a0, 47
        ld.d              $a1, $sp, 184
        st.b              $a1, $a0, 48
        ld.d              $a1, $sp, 192
        st.b              $a1, $a0, 49
        ld.d              $a1, $sp, 200
        st.b              $a1, $a0, 50
        ld.d              $a1, $sp, 208
        st.b              $a1, $a0, 51
        ld.d              $a1, $sp, 216
        st.b              $a1, $a0, 52
        ld.d              $a1, $sp, 224
        st.b              $a1, $a0, 53
        ld.d              $a1, $sp, 232
        st.b              $a1, $a0, 54
        ld.d              $a1, $sp, 240
        st.b              $a1, $a0, 55
        ld.d              $a1, $sp, 248
        st.b              $a1, $a0, 56
        ld.d              $a1, $sp, 256
        st.b              $a1, $a0, 57
        ld.d              $a1, $sp, 264
        st.b              $a1, $a0, 58
        ld.d              $a1, $sp, 272
        st.b              $a1, $a0, 59
        ld.d              $a1, $sp, 280
        st.b              $a1, $a0, 60
        ld.d              $a1, $sp, 288
        st.b              $a1, $a0, 61
        ld.d              $a1, $sp, 296
        st.b              $a1, $a0, 62
        ld.d              $a1, $sp, 304
        st.b              $a1, $a0, 63
        dbar              20
        ld.d              $s8, $sp, 312
        ld.d              $s7, $sp, 320
        ld.d              $s6, $sp, 328
        ld.d              $s5, $sp, 336
        ld.d              $s4, $sp, 344
        ld.d              $s3, $sp, 352
        ld.d              $s2, $sp, 360
        ld.d              $s1, $sp, 368
        ld.d              $s0, $sp, 376
        ld.d              $fp, $sp, 384
        ld.d              $ra, $sp, 392
        addi.d            $sp, $sp, 400
        ret

asm_test::atomic_memcpy_load_align1::acquire:
        addi.d            $sp, $sp, -80
        addi.d            $a3, $a1, 7
        bstrins.d         $a3, $zero, 2, 0
        bne               $a3, $a1, 0f
        move              $a2, $zero
        ori               $a3, $zero, 64
        b                 2f
0:
        sub.d             $a2, $a3, $a1
        sub.d             $a4, $a1, $a3
        addi.d            $a5, $sp, 16
        move              $a6, $a1
        nop
1:
        ld.b              $a7, $a6, 0
        st.b              $a7, $a5, 0
        addi.d            $a5, $a5, 1
        addi.d            $a4, $a4, 1
        addi.d            $a6, $a6, 1
        bnez              $a4, 1b
        sub.d             $a3, $a1, $a3
        addi.d            $a3, $a3, 64
        ori               $a4, $zero, 8
        bltu              $a3, $a4, 4f
2:
        addi.d            $a4, $sp, 16
        ori               $a5, $zero, 7
3:
        add.d             $a6, $a1, $a2
        ld.d              $a6, $a6, 0
        stx.d             $a6, $a2, $a4
        addi.d            $a3, $a3, -8
        addi.d            $a2, $a2, 8
        bltu              $a5, $a3, 3b
4:
        beqz              $a3, 6f
        add.d             $a1, $a1, $a2
        addi.d            $a4, $sp, 16
        add.d             $a2, $a4, $a2
        nop
        nop
5:
        ld.b              $a4, $a1, 0
        st.b              $a4, $a2, 0
        addi.d            $a1, $a1, 1
        addi.d            $a3, $a3, -1
        addi.d            $a2, $a2, 1
        bnez              $a3, 5b
6:
        vld               $vr0, $sp, 64
        vld               $vr1, $sp, 48
        vld               $vr2, $sp, 32
        vld               $vr3, $sp, 16
        vst               $vr0, $a0, 48
        vst               $vr1, $a0, 32
        vst               $vr2, $a0, 16
        vst               $vr3, $a0, 0
        dbar              20
        addi.d            $sp, $sp, 80
        ret

asm_test::atomic_memcpy_load_align2::read_volatile_acquire_fence:
        addi.d            $sp, $sp, -144
        st.d              $ra, $sp, 136
        st.d              $fp, $sp, 128
        st.d              $s0, $sp, 120
        st.d              $s1, $sp, 112
        st.d              $s2, $sp, 104
        st.d              $s3, $sp, 96
        st.d              $s4, $sp, 88
        st.d              $s5, $sp, 80
        st.d              $s6, $sp, 72
        st.d              $s7, $sp, 64
        st.d              $s8, $sp, 56
        ld.h              $a2, $a1, 62
        st.d              $a2, $sp, 48
        ld.h              $a2, $a1, 60
        st.d              $a2, $sp, 40
        ld.h              $a2, $a1, 58
        st.d              $a2, $sp, 32
        ld.h              $a2, $a1, 56
        st.d              $a2, $sp, 24
        ld.h              $a2, $a1, 54
        st.d              $a2, $sp, 16
        ld.h              $a7, $a1, 52
        ld.h              $t0, $a1, 50
        ld.h              $t1, $a1, 48
        ld.h              $t2, $a1, 46
        ld.h              $t3, $a1, 44
        ld.h              $t4, $a1, 42
        ld.h              $t5, $a1, 40
        ld.h              $t6, $a1, 38
        ld.h              $t7, $a1, 36
        ld.h              $t8, $a1, 34
        ld.h              $fp, $a1, 32
        ld.h              $s0, $a1, 30
        ld.h              $s1, $a1, 28
        ld.h              $s2, $a1, 26
        ld.h              $s3, $a1, 24
        ld.h              $s4, $a1, 22
        ld.h              $s5, $a1, 20
        ld.h              $s6, $a1, 18
        ld.h              $s7, $a1, 16
        ld.h              $s8, $a1, 14
        ld.h              $ra, $a1, 12
        ld.h              $a6, $a1, 10
        ld.h              $a5, $a1, 8
        ld.h              $a4, $a1, 6
        ld.h              $a3, $a1, 4
        ld.h              $a2, $a1, 2
        ld.h              $a1, $a1, 0
        st.h              $a1, $a0, 0
        st.h              $a2, $a0, 2
        st.h              $a3, $a0, 4
        st.h              $a4, $a0, 6
        st.h              $a5, $a0, 8
        st.h              $a6, $a0, 10
        st.h              $ra, $a0, 12
        st.h              $s8, $a0, 14
        st.h              $s7, $a0, 16
        st.h              $s6, $a0, 18
        st.h              $s5, $a0, 20
        st.h              $s4, $a0, 22
        st.h              $s3, $a0, 24
        st.h              $s2, $a0, 26
        st.h              $s1, $a0, 28
        st.h              $s0, $a0, 30
        st.h              $fp, $a0, 32
        st.h              $t8, $a0, 34
        st.h              $t7, $a0, 36
        st.h              $t6, $a0, 38
        st.h              $t5, $a0, 40
        st.h              $t4, $a0, 42
        st.h              $t3, $a0, 44
        st.h              $t2, $a0, 46
        st.h              $t1, $a0, 48
        st.h              $t0, $a0, 50
        st.h              $a7, $a0, 52
        ld.d              $a1, $sp, 16
        st.h              $a1, $a0, 54
        ld.d              $a1, $sp, 24
        st.h              $a1, $a0, 56
        ld.d              $a1, $sp, 32
        st.h              $a1, $a0, 58
        ld.d              $a1, $sp, 40
        st.h              $a1, $a0, 60
        ld.d              $a1, $sp, 48
        st.h              $a1, $a0, 62
        dbar              20
        ld.d              $s8, $sp, 56
        ld.d              $s7, $sp, 64
        ld.d              $s6, $sp, 72
        ld.d              $s5, $sp, 80
        ld.d              $s4, $sp, 88
        ld.d              $s3, $sp, 96
        ld.d              $s2, $sp, 104
        ld.d              $s1, $sp, 112
        ld.d              $s0, $sp, 120
        ld.d              $fp, $sp, 128
        ld.d              $ra, $sp, 136
        addi.d            $sp, $sp, 144
        ret

asm_test::atomic_memcpy_load_align2::acquire:
        addi.d            $sp, $sp, -80
        addi.d            $a3, $a1, 7
        bstrins.d         $a3, $zero, 2, 0
        bne               $a3, $a1, 0f
        move              $a2, $zero
        ori               $a3, $zero, 64
        b                 2f
0:
        sub.d             $a2, $a3, $a1
        sub.d             $a4, $a1, $a3
        addi.d            $a5, $sp, 16
        move              $a6, $a1
        nop
1:
        ld.b              $a7, $a6, 0
        st.b              $a7, $a5, 0
        addi.d            $a5, $a5, 1
        addi.d            $a4, $a4, 1
        addi.d            $a6, $a6, 1
        bnez              $a4, 1b
        sub.d             $a3, $a1, $a3
        addi.d            $a3, $a3, 64
        ori               $a4, $zero, 8
        bltu              $a3, $a4, 4f
2:
        addi.d            $a4, $sp, 16
        ori               $a5, $zero, 7
3:
        add.d             $a6, $a1, $a2
        ld.d              $a6, $a6, 0
        stx.d             $a6, $a2, $a4
        addi.d            $a3, $a3, -8
        addi.d            $a2, $a2, 8
        bltu              $a5, $a3, 3b
4:
        beqz              $a3, 6f
        add.d             $a1, $a1, $a2
        addi.d            $a4, $sp, 16
        add.d             $a2, $a4, $a2
        nop
        nop
5:
        ld.b              $a4, $a1, 0
        st.b              $a4, $a2, 0
        addi.d            $a1, $a1, 1
        addi.d            $a3, $a3, -1
        addi.d            $a2, $a2, 1
        bnez              $a3, 5b
6:
        vld               $vr0, $sp, 64
        vld               $vr1, $sp, 48
        vld               $vr2, $sp, 32
        vld               $vr3, $sp, 16
        vst               $vr0, $a0, 48
        vst               $vr1, $a0, 32
        vst               $vr2, $a0, 16
        vst               $vr3, $a0, 0
        dbar              20
        addi.d            $sp, $sp, 80
        ret

asm_test::atomic_memcpy_load_align4::read_volatile_acquire_fence:
        ld.w              $a2, $a1, 60
        ld.w              $a3, $a1, 56
        ld.w              $a4, $a1, 52
        ld.w              $a5, $a1, 48
        ld.w              $a6, $a1, 44
        ld.w              $a7, $a1, 40
        ld.w              $t0, $a1, 36
        ld.w              $t1, $a1, 32
        ld.w              $t2, $a1, 28
        ld.w              $t3, $a1, 24
        ld.w              $t4, $a1, 20
        ld.w              $t5, $a1, 16
        ld.w              $t6, $a1, 12
        ld.w              $t7, $a1, 8
        ld.w              $t8, $a1, 4
        ld.w              $a1, $a1, 0
        st.w              $a1, $a0, 0
        st.w              $t8, $a0, 4
        st.w              $t7, $a0, 8
        st.w              $t6, $a0, 12
        st.w              $t5, $a0, 16
        st.w              $t4, $a0, 20
        st.w              $t3, $a0, 24
        st.w              $t2, $a0, 28
        st.w              $t1, $a0, 32
        st.w              $t0, $a0, 36
        st.w              $a7, $a0, 40
        st.w              $a6, $a0, 44
        st.w              $a5, $a0, 48
        st.w              $a4, $a0, 52
        st.w              $a3, $a0, 56
        st.w              $a2, $a0, 60
        dbar              20
        ret

asm_test::atomic_memcpy_load_align4::acquire:
        addi.d            $sp, $sp, -80
        addi.d            $a3, $a1, 7
        bstrins.d         $a3, $zero, 2, 0
        bne               $a3, $a1, 0f
        move              $a2, $zero
        ori               $a3, $zero, 64
        b                 2f
0:
        sub.d             $a2, $a3, $a1
        sub.d             $a4, $a1, $a3
        addi.d            $a5, $sp, 16
        move              $a6, $a1
        nop
1:
        ld.b              $a7, $a6, 0
        st.b              $a7, $a5, 0
        addi.d            $a5, $a5, 1
        addi.d            $a4, $a4, 1
        addi.d            $a6, $a6, 1
        bnez              $a4, 1b
        sub.d             $a3, $a1, $a3
        addi.d            $a3, $a3, 64
        ori               $a4, $zero, 8
        bltu              $a3, $a4, 4f
2:
        addi.d            $a4, $sp, 16
        ori               $a5, $zero, 7
3:
        add.d             $a6, $a1, $a2
        ld.d              $a6, $a6, 0
        stx.d             $a6, $a2, $a4
        addi.d            $a3, $a3, -8
        addi.d            $a2, $a2, 8
        bltu              $a5, $a3, 3b
4:
        beqz              $a3, 6f
        add.d             $a1, $a1, $a2
        addi.d            $a4, $sp, 16
        add.d             $a2, $a4, $a2
        nop
        nop
5:
        ld.b              $a4, $a1, 0
        st.b              $a4, $a2, 0
        addi.d            $a1, $a1, 1
        addi.d            $a3, $a3, -1
        addi.d            $a2, $a2, 1
        bnez              $a3, 5b
6:
        vld               $vr0, $sp, 64
        vld               $vr1, $sp, 48
        vld               $vr2, $sp, 32
        vld               $vr3, $sp, 16
        vst               $vr0, $a0, 48
        vst               $vr1, $a0, 32
        vst               $vr2, $a0, 16
        vst               $vr3, $a0, 0
        dbar              20
        addi.d            $sp, $sp, 80
        ret

asm_test::atomic_memcpy_load_align8::read_volatile_acquire_fence:
        ld.d              $a2, $a1, 56
        ld.d              $a3, $a1, 48
        ld.d              $a4, $a1, 40
        ld.d              $a5, $a1, 32
        ld.d              $a6, $a1, 24
        ld.d              $a7, $a1, 16
        ld.d              $t0, $a1, 8
        ld.d              $a1, $a1, 0
        st.d              $a1, $a0, 0
        st.d              $t0, $a0, 8
        st.d              $a7, $a0, 16
        st.d              $a6, $a0, 24
        st.d              $a5, $a0, 32
        st.d              $a4, $a0, 40
        st.d              $a3, $a0, 48
        st.d              $a2, $a0, 56
        dbar              20
        ret

asm_test::atomic_memcpy_load_align8::acquire:
        ld.d              $a2, $a1, 56
        ld.d              $a3, $a1, 48
        ld.d              $a4, $a1, 40
        ld.d              $a5, $a1, 32
        ld.d              $a6, $a1, 24
        ld.d              $a7, $a1, 16
        ld.d              $t0, $a1, 8
        ld.d              $a1, $a1, 0
        st.d              $a1, $a0, 0
        st.d              $t0, $a0, 8
        st.d              $a7, $a0, 16
        st.d              $a6, $a0, 24
        st.d              $a5, $a0, 32
        st.d              $a4, $a0, 40
        st.d              $a3, $a0, 48
        st.d              $a2, $a0, 56
        dbar              20
        ret

asm_test::atomic_memcpy_load_align16::read_volatile_acquire_fence:
        ld.d              $a2, $a1, 56
        ld.d              $a3, $a1, 48
        ld.d              $a4, $a1, 40
        ld.d              $a5, $a1, 32
        ld.d              $a6, $a1, 24
        ld.d              $a7, $a1, 16
        ld.d              $t0, $a1, 8
        ld.d              $a1, $a1, 0
        st.d              $a1, $a0, 0
        st.d              $t0, $a0, 8
        st.d              $a7, $a0, 16
        st.d              $a6, $a0, 24
        st.d              $a5, $a0, 32
        st.d              $a4, $a0, 40
        st.d              $a3, $a0, 48
        st.d              $a2, $a0, 56
        dbar              20
        ret

asm_test::atomic_memcpy_load_align16::acquire:
        ld.d              $a2, $a1, 56
        ld.d              $a3, $a1, 48
        ld.d              $a4, $a1, 40
        ld.d              $a5, $a1, 32
        ld.d              $a6, $a1, 24
        ld.d              $a7, $a1, 16
        ld.d              $t0, $a1, 8
        ld.d              $a1, $a1, 0
        st.d              $a1, $a0, 0
        st.d              $t0, $a0, 8
        st.d              $a7, $a0, 16
        st.d              $a6, $a0, 24
        st.d              $a5, $a0, 32
        st.d              $a4, $a0, 40
        st.d              $a3, $a0, 48
        st.d              $a2, $a0, 56
        dbar              20
        ret

asm_test::atomic_memcpy_store_align1::write_volatile_release_fence:
        dbar              18
        ld.d              $a2, $a1, 56
        st.d              $a2, $a0, 56
        ld.d              $a2, $a1, 48
        st.d              $a2, $a0, 48
        ld.d              $a2, $a1, 40
        st.d              $a2, $a0, 40
        ld.d              $a2, $a1, 32
        st.d              $a2, $a0, 32
        ld.d              $a2, $a1, 24
        st.d              $a2, $a0, 24
        ld.d              $a2, $a1, 16
        st.d              $a2, $a0, 16
        ld.d              $a2, $a1, 8
        st.d              $a2, $a0, 8
        ld.d              $a1, $a1, 0
        st.d              $a1, $a0, 0
        ret

asm_test::atomic_memcpy_store_align1::release:
        addi.d            $a3, $a0, 7
        bstrins.d         $a3, $zero, 2, 0
        dbar              18
        bne               $a3, $a0, 0f
        move              $a2, $zero
        ori               $a3, $zero, 64
        b                 2f
0:
        sub.d             $a2, $a3, $a0
        sub.d             $a4, $a0, $a3
        move              $a5, $a1
        move              $a6, $a0
        nop
1:
        ld.b              $a7, $a5, 0
        st.b              $a7, $a6, 0
        addi.d            $a6, $a6, 1
        addi.d            $a4, $a4, 1
        addi.d            $a5, $a5, 1
        bnez              $a4, 1b
        sub.d             $a3, $a0, $a3
        addi.d            $a3, $a3, 64
        ori               $a4, $zero, 8
        bltu              $a3, $a4, 4f
2:
        ori               $a4, $zero, 7
        nop
3:
        ldx.d             $a5, $a1, $a2
        add.d             $a6, $a0, $a2
        st.d              $a5, $a6, 0
        addi.d            $a3, $a3, -8
        addi.d            $a2, $a2, 8
        bltu              $a4, $a3, 3b
4:
        beqz              $a3, 6f
        add.d             $a1, $a1, $a2
        add.d             $a0, $a0, $a2
        nop
        nop
        nop
5:
        ld.b              $a2, $a1, 0
        st.b              $a2, $a0, 0
        addi.d            $a1, $a1, 1
        addi.d            $a3, $a3, -1
        addi.d            $a0, $a0, 1
        bnez              $a3, 5b
6:
        ret

asm_test::atomic_memcpy_store_align2::write_volatile_release_fence:
        dbar              18
        ld.d              $a2, $a1, 56
        st.d              $a2, $a0, 56
        ld.d              $a2, $a1, 48
        st.d              $a2, $a0, 48
        ld.d              $a2, $a1, 40
        st.d              $a2, $a0, 40
        ld.d              $a2, $a1, 32
        st.d              $a2, $a0, 32
        ld.d              $a2, $a1, 24
        st.d              $a2, $a0, 24
        ld.d              $a2, $a1, 16
        st.d              $a2, $a0, 16
        ld.d              $a2, $a1, 8
        st.d              $a2, $a0, 8
        ld.d              $a1, $a1, 0
        st.d              $a1, $a0, 0
        ret

asm_test::atomic_memcpy_store_align2::release:
        addi.d            $a3, $a0, 7
        bstrins.d         $a3, $zero, 2, 0
        dbar              18
        bne               $a3, $a0, 0f
        move              $a2, $zero
        ori               $a3, $zero, 64
        b                 2f
0:
        sub.d             $a2, $a3, $a0
        sub.d             $a4, $a0, $a3
        move              $a5, $a1
        move              $a6, $a0
        nop
1:
        ld.b              $a7, $a5, 0
        st.b              $a7, $a6, 0
        addi.d            $a6, $a6, 1
        addi.d            $a4, $a4, 1
        addi.d            $a5, $a5, 1
        bnez              $a4, 1b
        sub.d             $a3, $a0, $a3
        addi.d            $a3, $a3, 64
        ori               $a4, $zero, 8
        bltu              $a3, $a4, 4f
2:
        ori               $a4, $zero, 7
        nop
3:
        ldx.d             $a5, $a1, $a2
        add.d             $a6, $a0, $a2
        st.d              $a5, $a6, 0
        addi.d            $a3, $a3, -8
        addi.d            $a2, $a2, 8
        bltu              $a4, $a3, 3b
4:
        beqz              $a3, 6f
        add.d             $a1, $a1, $a2
        add.d             $a0, $a0, $a2
        nop
        nop
        nop
5:
        ld.b              $a2, $a1, 0
        st.b              $a2, $a0, 0
        addi.d            $a1, $a1, 1
        addi.d            $a3, $a3, -1
        addi.d            $a0, $a0, 1
        bnez              $a3, 5b
6:
        ret

asm_test::atomic_memcpy_store_align4::write_volatile_release_fence:
        dbar              18
        ld.d              $a2, $a1, 56
        st.d              $a2, $a0, 56
        ld.d              $a2, $a1, 48
        st.d              $a2, $a0, 48
        ld.d              $a2, $a1, 40
        st.d              $a2, $a0, 40
        ld.d              $a2, $a1, 32
        st.d              $a2, $a0, 32
        ld.d              $a2, $a1, 24
        st.d              $a2, $a0, 24
        ld.d              $a2, $a1, 16
        st.d              $a2, $a0, 16
        ld.d              $a2, $a1, 8
        st.d              $a2, $a0, 8
        ld.d              $a1, $a1, 0
        st.d              $a1, $a0, 0
        ret

asm_test::atomic_memcpy_store_align4::release:
        addi.d            $a3, $a0, 7
        bstrins.d         $a3, $zero, 2, 0
        dbar              18
        bne               $a3, $a0, 0f
        move              $a2, $zero
        ori               $a3, $zero, 64
        b                 2f
0:
        sub.d             $a2, $a3, $a0
        sub.d             $a4, $a0, $a3
        move              $a5, $a1
        move              $a6, $a0
        nop
1:
        ld.b              $a7, $a5, 0
        st.b              $a7, $a6, 0
        addi.d            $a6, $a6, 1
        addi.d            $a4, $a4, 1
        addi.d            $a5, $a5, 1
        bnez              $a4, 1b
        sub.d             $a3, $a0, $a3
        addi.d            $a3, $a3, 64
        ori               $a4, $zero, 8
        bltu              $a3, $a4, 4f
2:
        ori               $a4, $zero, 7
        nop
3:
        ldx.d             $a5, $a1, $a2
        add.d             $a6, $a0, $a2
        st.d              $a5, $a6, 0
        addi.d            $a3, $a3, -8
        addi.d            $a2, $a2, 8
        bltu              $a4, $a3, 3b
4:
        beqz              $a3, 6f
        add.d             $a1, $a1, $a2
        add.d             $a0, $a0, $a2
        nop
        nop
        nop
5:
        ld.b              $a2, $a1, 0
        st.b              $a2, $a0, 0
        addi.d            $a1, $a1, 1
        addi.d            $a3, $a3, -1
        addi.d            $a0, $a0, 1
        bnez              $a3, 5b
6:
        ret

asm_test::atomic_memcpy_store_align8::write_volatile_release_fence:
        dbar              18
        ld.d              $a2, $a1, 56
        st.d              $a2, $a0, 56
        ld.d              $a2, $a1, 48
        st.d              $a2, $a0, 48
        ld.d              $a2, $a1, 40
        st.d              $a2, $a0, 40
        ld.d              $a2, $a1, 32
        st.d              $a2, $a0, 32
        ld.d              $a2, $a1, 24
        st.d              $a2, $a0, 24
        ld.d              $a2, $a1, 16
        st.d              $a2, $a0, 16
        ld.d              $a2, $a1, 8
        st.d              $a2, $a0, 8
        ld.d              $a1, $a1, 0
        st.d              $a1, $a0, 0
        ret

asm_test::atomic_memcpy_store_align8::release:
        dbar              18
        ld.d              $a2, $a1, 56
        st.d              $a2, $a0, 56
        ld.d              $a2, $a1, 48
        st.d              $a2, $a0, 48
        ld.d              $a2, $a1, 40
        st.d              $a2, $a0, 40
        ld.d              $a2, $a1, 32
        st.d              $a2, $a0, 32
        ld.d              $a2, $a1, 24
        st.d              $a2, $a0, 24
        ld.d              $a2, $a1, 16
        st.d              $a2, $a0, 16
        ld.d              $a2, $a1, 8
        st.d              $a2, $a0, 8
        ld.d              $a1, $a1, 0
        st.d              $a1, $a0, 0
        ret

asm_test::atomic_memcpy_store_align16::write_volatile_release_fence:
        dbar              18
        ld.d              $a2, $a1, 56
        st.d              $a2, $a0, 56
        ld.d              $a2, $a1, 48
        st.d              $a2, $a0, 48
        ld.d              $a2, $a1, 40
        st.d              $a2, $a0, 40
        ld.d              $a2, $a1, 32
        st.d              $a2, $a0, 32
        ld.d              $a2, $a1, 24
        st.d              $a2, $a0, 24
        ld.d              $a2, $a1, 16
        st.d              $a2, $a0, 16
        ld.d              $a2, $a1, 8
        st.d              $a2, $a0, 8
        ld.d              $a1, $a1, 0
        st.d              $a1, $a0, 0
        ret

asm_test::atomic_memcpy_store_align16::release:
        dbar              18
        ld.d              $a2, $a1, 56
        st.d              $a2, $a0, 56
        ld.d              $a2, $a1, 48
        st.d              $a2, $a0, 48
        ld.d              $a2, $a1, 40
        st.d              $a2, $a0, 40
        ld.d              $a2, $a1, 32
        st.d              $a2, $a0, 32
        ld.d              $a2, $a1, 24
        st.d              $a2, $a0, 24
        ld.d              $a2, $a1, 16
        st.d              $a2, $a0, 16
        ld.d              $a2, $a1, 8
        st.d              $a2, $a0, 8
        ld.d              $a1, $a1, 0
        st.d              $a1, $a0, 0
        ret
